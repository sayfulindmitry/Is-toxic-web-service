# **Introduction**

Данный сервис создан с целью определения токсичности того или иного высказывания (комментария). 
Данные для его создания были взяты с соревнования на kaggle.com "Jigsaw Unintended Bias in Toxicity Classification".
Сервис способен принимать POST запрос со строкой в формате Json и возвращать 'Toxic' или 'Ok' также в формате Json.

Для обработки слов (перевод в числовые значения) в строке я использовал статистику Tf-idf. Обученный на данных вокабуляр находится в файле "vectorize.pkl". <br>
Далее я обучил логистическую регрессию (auc_score ~0.9) и сохранил классификатор в файл "log_reg_model.pkl". Код с обработкой данных и обучением модели находится в файле "log_reg_model.py".

Ниже представлена интсрукция по запуску веб-сервиса.


# **Шаг 1**

Клонируем себе репозиторий.
Открываем docker, заходим в папку python_web_service_with_model.

Запускаем команду в терминале:
$ docker-compose up --build

Построили и открыли контейнер. Должен был образоваться локальный хост: http://localhost:5000/

Далее работаем с моим веб-сервисом.

# **Шаг 2**

В файле "service.py" находится функция, которая способна принимать POST запрос с Json (комментарием) и возвращать 'Toxic' или 'Ok' 
также в формате Json.

Есть два способа отправить данный POST запрос:
1. Используя curl
 
Для этого в терминале нужно вбить следующее:
curl --header "Content-Type: application/json" \
  --request POST \
  --data '{'Comment': 'comment text'}' \
  http://localhost:5000/is_toxic
  
Здесь data - данные, которые мы хотим, чтобы наш сервис обработал.
На выходе мы получим токсичен комментарий или нет.

2. С помощью Postman

В этой программе нужно сделать POST запрос через адрес http://localhost:5000/is_toxic.
В Headers в Key добавить Content-Type, а в Value - application/json. Далее в Body нужно поставить галочку в поле "raw", 
в поле ниже вбить нужные данные.
